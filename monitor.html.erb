<!DOCTYPE html>
<head>
	<meta charset="utf-8"> 
	
	<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
	<script type="text/javascript" src="jquery-2.1.1.js"></script>
	<script type="text/javascript">
		google.load("visualization", "1", {packages:["corechart"]});
     	google.setOnLoadCallback(carregarInformacoes);

		function carregarInformacoes() {
		    $.ajax({
		    	complete: setTimeout(carregarInformacoes, 10000),
		    	dataType: 'json',
		    	timeout: 10000,
		        type: 'POST',
		        url: 'monitor-memoria.json'
		    })
		    .done(function(data) {
		    	desenharGrafico(data);
		    })
		    .fail(function(data) {
		    });	
		};

		function desenharGrafico(data) {
			var dataTable = new google.visualization.DataTable(data);

			var options = {
			  	legend: {
			  		position: 'bottom'
			  	},
			  	hAxis: {
			  		titleTextStyle: {
			  			color: '#333'
			  		}
			 	},
			 	vAxis: {
			 		format: '# MiB',
			 		minValue: 0,
			 		maxValue: <%= node["memory"]["total"].to_i / 1024 %>,
			 		titleTextStyle: {
			 			color: '#333'
			 		}
			 	}
			};

			var chart = new google.visualization.AreaChart(document.getElementById('monitor-memoria_em_uso'));
			chart.draw(dataTable, options);
		};
	</script>

	<title> <%= node["node_name"] %> - Monitor de Recursos</title>
</head>

<body>
	<div style="border: 2px solid lightgrey; height: 94px; min-width: 960px; width: 100%;">
		<div style="background-color: lightgrey; border-bottom: 2px solid lightgrey; font-weight: bold; height: 24px; text-align: center; width: 100%;">
			<label style="vertical-align: middle;">Informãções Técnicas</label>
		</div>
		<div style="height: 70px; width: 100%;">
			<div style="float: left; height: 100%; width: 50%;">
				<div style="width: 98%; margin: 2px auto;">
					<label style="font-weight: bold;">Nome do Nó: </label>
					<label><%= node["node_name"] %></label>
				</div>
				<div style="width: 98%; margin: 2px auto;">
					<label style="font-weight: bold;">Platforma: </label>
					<label><%= node["platform"] %></label>
				</div>
				<div style="width: 98%; margin: 2px auto;">
					<label style="font-weight: bold;">FQDN: </label>
					<label><%= node["fqdn"] %></label>
				</div>
			</div>
			<div style="float: right; height: 100%; width: 50%;">
				<div style="width: 98%; margin: 2px auto;">
					<label style="font-weight: bold;">MAC: </label>
					<label><%= node["macaddress"] %></label>
				</div>
				<div style="width: 98%; margin: 2px auto;">
					<label style="font-weight: bold;">IP: </label>
					<label><%= node["ipaddress"] %></label>
				</div>
			</div>
			<div style="clear: both;"></div>			
		</div>
	</div>
	<div style="border: 2px solid lightgrey; height: 500px; margin-top: 10px; min-width: 960px; width: 100%;">
		<div style="background-color: lightgrey; border-bottom: 2px solid lightgrey; font-weight: bold; height: 24px; text-align: center; width: 100%;">
			<label style="vertical-align: middle;">Uso de Memória RAM</label>
		</div>
		<div style="height: 476px; width: 100%;">
			<div id="monitor-memoria_em_uso" style="width: 100%; height: 98%;"></div>
		</div>
	</div>
	<div style="height: 500px; margin-top: 10px; min-width: 960px; width: 100%;">
		<div style="border: 2px solid lightgrey; float:left; height: 100%; width: 49%;">
			<div style="background-color: lightgrey; border-bottom: 2px solid lightgrey; font-weight: bold; height: 24px; text-align: center; width: 100%;">
				<label style="vertical-align: middle;">Uso de Memória SWAP</label>
			</div>
			<div style="height: 476px; width: 100%;">
			</div>
		</div>
		<div style="border: 2px solid lightgrey; float:right; height: 100%; width: 49%;">
			<div style="background-color: lightgrey; border-bottom: 2px solid lightgrey; font-weight: bold; height: 24px; text-align: center; width: 100%;">
				<label style="vertical-align: middle;">Uso do Disco Rígido</label>
			</div>
			<div style="height: 476px; width: 100%;">
			</div>
		</div>
		<div style="clear: both;"></div>
	</div>
</body>
</html>